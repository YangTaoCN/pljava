<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2016-03-29 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>PostgreSQL PL/Java &#x2013; Release notes</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20160329" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="https://tada.github.io/pljava/" id="bannerLeft" title="PL/Java logo combining the PostgreSQL elephant and a Java bean">
                                                <img src="images/pljava_logo.jpg" alt="PL/Java logo combining the PostgreSQL elephant and a Java bean" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2016-03-29</span>
                  &nbsp;| <span id="projectVersion">Version: 1.5.0</span>
                      </div>
            <div class="xright">                    <a href="https://github.com/tada/pljava/wiki/" class="externalLink" title="Wiki">Wiki</a>
            |
                        <a href="https://github.com/tada/pljava/issues" class="externalLink" title="Issues">Issues</a>
            |
                        <a href="http://lists.pgfoundry.org/pipermail/pljava-dev/" class="externalLink" title="Mailing list">Mailing list</a>
            |
                        <a href="https://github.com/tada/pljava/tree/master/" class="externalLink" title="Code">Code</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Usage</h5>
                  <ul>
                  <li class="none">
                          <a href="build/build.html" title="Building PL/Java">Building PL/Java</a>
            </li>
                  <li class="none">
                          <a href="install/install.html" title="Installing into PostgreSQL">Installing into PostgreSQL</a>
            </li>
                  <li class="none">
                          <a href="use/use.html" title="User guide">User guide</a>
            </li>
                  <li class="none">
                          <a href="develop/develop.html" title="Developer notes">Developer notes</a>
            </li>
          </ul>
                       <h5>Release Information</h5>
                  <ul>
                  <li class="none">
            <strong>Release notes</strong>
          </li>
          </ul>
                       <h5>Modules</h5>
                  <ul>
                  <li class="none">
                          <a href="pljava-api/index.html" title="PL/Java API">PL/Java API</a>
            </li>
                  <li class="none">
                          <a href="pljava/index.html" title="PL/Java backend Java code">PL/Java backend Java code</a>
            </li>
                  <li class="none">
                          <a href="pljava-so/index.html" title="PL/Java backend native code">PL/Java backend native code</a>
            </li>
                  <li class="none">
                          <a href="pljava-deploy/index.html" title="PL/Java Deploy">PL/Java Deploy</a>
            </li>
                  <li class="none">
                          <a href="pljava-ant/index.html" title="PL/Java Ant tasks">PL/Java Ant tasks</a>
            </li>
                  <li class="none">
                          <a href="pljava-examples/index.html" title="PL/Java examples">PL/Java examples</a>
            </li>
                  <li class="none">
                          <a href="pljava-packaging/index.html" title="PL/Java packaging">PL/Java packaging</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>Release notes</h1>
<div class="section">
<h2><a name="PLJava_1.5.0"></a>PL/Java 1.5.0</h2>
<p>This, the first PL/Java numbered release since 1.4.3 in 2011, combines compatibility with the latest PostgreSQL and Java versions with modernized build and installation procedures, automatic generation of SQL deployment code from Java annotations, and many significant fixes.</p>
<div class="section">
<h3><a name="Security"></a>Security</h3>
<p>Several security issues are addressed in this release. Sites already using PL/Java are encouraged to update to 1.5.0. For several of the issues below, practical measures are described to mitigate risk until an update can be completed.</p>
<p><a class="externalLink" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-0766">CVE-2016-0766</a>, a privilege escalation requiring an authenticated PostgreSQL connection, is closed by installing PL/Java 1.5.0 (including prereleases) or by updating PostgreSQL itself to at least 9.5.1, 9.4.6, 9.3.11, 9.2.15, 9.1.20. Vulnerable systems are only those running both an older PL/Java and an older PostgreSQL.</p>
<p><a class="externalLink" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-0767">CVE-2016-0767</a>, in which an authenticated PostgreSQL user with USAGE permission on the <tt>public</tt> schema may alter the <tt>public</tt> schema classpath, is closed by release 1.5.0 (including prereleases). If updating to 1.5.0 must be delayed, risk can be mitigated by revoking public <tt>EXECUTE</tt> permission on <tt>sqlj.set_classpath</tt> and granting it selectively to responsible users or roles.</p>
<p>This release brings a policy change to a more secure-by-default posture, where the ability to create functions in <tt>LANGUAGE java</tt> is no longer automatically granted to <tt>public</tt>, but can be selectively granted to roles that will have that responsibility. The change reduces exposure to a known issue present in 1.5.0 and earlier versions, that will be closed in a future release (<a class="externalLink" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-0768">CVE-2016-0768</a>, see <b>large objects, access control</b> below).</p>
<p>The new policy will be applied in a new installation; permissions will not be changed in an upgrade, but any site can move to this policy, even before updating to 1.5.0, with <tt>REVOKE USAGE ON LANGUAGE java FROM public;</tt> followed by explicit <tt>GRANT</tt> commands for the users/roles expected to create Java functions.</p>
<p><a class="externalLink" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-2192">CVE-2016-2192</a>, in which an authenticated user can alter type mappings without owning the types involved. Exploitability is limited by other permissions, but if type mapping is a feature being used at a site, one can interfere with proper operation of code that relies on it. A mitigation is simply to <tt>REVOKE EXECUTE ... FROM PUBLIC</tt> on the <tt>sqlj.add_type_mapping</tt> and <tt>sqlj.drop_type_mapping</tt> functions, and grant the privilege only to selected users or roles. As of 1.5.0, these functions require the invoker to be superuser or own the type being mapped.</p></div>
<div class="section">
<h3><a name="Version_compatibility"></a>Version compatibility</h3>
<p>PL/Java 1.5.0 can be built against recent PostgreSQL versions including 9.5, using Java SE 8, 7, or 6. See <a href="build/versions.html">version compatibility</a> for more detail. OpenJDK is well supported. Support for GCJ has been dropped; features of modern Java VMs that are useful to minimize footprint and startup time, such as class-data sharing, are now more deeply covered <a href="install/vmoptions.html">in the installation docs</a>.</p></div>
<div class="section">
<h3><a name="Build_procedures"></a>Build procedures</h3>
<p>Since 2013, PL/Java has been hosted <a class="externalLink" href="https://github.com/tada/pljava">on GitHub</a> and built using <a class="externalLink" href="http://maven.apache.org/">Apache Maven</a>. See the new <a href="build/build.html">build instructions</a> for details.</p>
<p>Reported build issues for specific platforms have been resolved, with new platform-specific build documentation for <a href="build/macosx.html">OS X</a>, <a href="build/solaris.html">Solaris</a>, <a href="build/ubuntu.html">Ubuntu</a>, <a href="build/buildmsvc.html">Windows MSVC</a>, and <a href="build/mingw64.html">Windows MinGW-w64</a>.</p>
<p>The build produces a redistributable installation archive usable with the version of PostgreSQL built against and the same operating system, architecture, and linker. The type of archive is <tt>jar</tt> on all platforms, as all PL/Java installations will have Java available.</p></div>
<div class="section">
<h3><a name="Installation_procedures"></a>Installation procedures</h3>
<p>The jar produced by the build is executable and will self-extract, consulting <tt>pg_config</tt> on the destination system to find the correct default locations for the extracted files. Any location can be overridden. (Enhancement requests <a class="externalLink" href="https://github.com/tada/pljava/issues/6">6</a>, <a class="externalLink" href="https://github.com/tada/pljava/issues/9">9</a>)</p>
<p>PL/Java now uses a PostgreSQL configuration variable, <tt>pljava.libjvm_location</tt>, to find the Java runtime to use, eliminating the past need for highly platform-specific tricks like link-time options or runtime-loader configuration just so that PL/Java could find Java. PostgreSQL configuration variables are now the only form of configuration needed for PL/Java, and the <tt>libjvm_location</tt> should be the only setting needed if file locations have not been overridden.</p>
<p>In PostgreSQL 9.1 and later, PL/Java can be installed with <tt>CREATE EXTENSION pljava</tt>. Regardless of PostgreSQL version, installation has been simplified. Former procedures involving <tt>Deployer</tt> or <tt>install.sql</tt> are no longer required. Details are in the <a href="install/install.html">new installation instructions</a>.</p>
<div class="section">
<h4><a name="Schema_migration"></a>Schema migration</h4>
<p>The tables used internally by PL/Java have changed. If PL/Java 1.5.0 is loaded in a database with an existing <tt>sqlj</tt> schema populated by an earlier PL/Java version (1.3.0 or later), the structure will be updated without data loss (enhancement request <a class="externalLink" href="https://github.com/tada/pljava/issues/12">12</a>). <i>Remember that PL/Java runs independently in each database session where it is in use. Older PL/Java versions active in other sessions can be disrupted by the schema change.</i></p>
<p>A trial installation of PL/Java 1.5.0 can be done in a transaction, and rolled back if desired, leaving the schema as it was. Any concurrent sessions with active older PL/Java versions will not be disrupted by the altered schema as long as the transaction remains open, <i>but they may block for the duration, so such a test transaction should be kept short</i>.</p></div></div>
<div class="section">
<h3><a name="Changes"></a>Changes</h3>
<div class="section">
<h4><a name="Behavior_of_readSQL_and_writeSQL_for_base_and_mirror_user-defined_types"></a>Behavior of <tt>readSQL</tt> and <tt>writeSQL</tt> for base and mirror user-defined types</h4>
<p>In the course of fixing <a class="externalLink" href="https://github.com/tada/pljava/issues/98">issue #98</a>, the actual behavior of <tt>readSQL</tt> and <tt>writeSQL</tt> with base or mirror types, which had not previously been documented, <a href="develop/coercion.html">now is</a>, along with other details of PL/Java&#x2019;s type coercion rules found only in the code. Because machine byte order was responsible for issue #98, it now (a) is selectable, and (b) has different, appropriate, defaults for mirror UDTs (which need to match PostgreSQL&#x2019;s order) and for base UDTs (which must stay big-endian because of how binary <tt>COPY</tt> is specified). A <a href="use/byteorder.html">new documentation section</a> explains in detail.</p></div>
<div class="section">
<h4><a name="USAGE_to_PUBLIC_no_longer_default_for_java_language"></a><tt>USAGE</tt> to <tt>PUBLIC</tt> no longer default for <tt>java</tt> language</h4>
<p>Of the two languages installed by PL/Java, functions that declare <tt>LANGUAGE javau</tt> can be created only by superusers, while those that declare <tt>LANGUAGE java</tt> can be created by any user or role granted the <tt>USAGE</tt> privilege on the language.</p>
<p>In the past, the language <tt>java</tt> has been created with PostgreSQL&#x2019;s default permission granting <tt>USAGE</tt> to <tt>PUBLIC</tt>, but PL/Java 1.5.0 leaves the permission to be explicitly granted to those users or roles expected to create Java functions, in keeping with least-privilege principles. See <b>large objects, access control</b> under <b>known issues</b> for background.</p></div>
<div class="section">
<h4><a name="SQL_generated_by_Java_annotations"></a>SQL generated by Java annotations</h4>
<p>Java code developed for use by PL/Java can carry in-code annotations, used by the Java compiler to generate the SQL commands to declare the new functions, types, triggers, etc. in PostgreSQL (enhancement request <a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=337&amp;group_id=1000038&amp;aid=1011112">1011112</a>, though different in implementation). This eliminates the need to have Java code and the corresponding SQL commands developed in parallel, and the class of errors possible when both are not updated together. It also allows compile-time checks that the Java methods or classes being annotated are suitable (correct access modifiers, signatures, etc.) for their declared SQL purposes, rather than discovering such issues only upon loading the code into PostgreSQL and trying to use it.</p>
<p>The Java compiler writes the generated SQL into a &#x201c;deployment descriptor&#x201d; file (<tt>pljava.ddr</tt> by default), as specified by the SQL/JRT standard. The file can be included in a <tt>jar</tt> archive with the compiled code, and the commands will be executed by PL/Java when the <tt>install_jar</tt> function is used to load the jar.</p>
<p>SQL generation is covered in the <a href="use/use.html">updated user documentation</a>, and illustrated in the <a href="use/hello.html">Hello, World example</a> and <a class="externalLink" href="https://github.com/tada/pljava/tree/master//pljava-examples/src/main/java/org/postgresql/pljava/example/annotation">several other supplied examples</a>. Reference information is <a href="pljava-api/apidocs/index.html?org/postgresql/pljava/annotation/package-summary.html#package_description">in the API documentation</a>. It is currently usable to declare functions, triggers, and user-defined types, both base and composite.</p>
<p>The history of this feature in PL/Java is long, with the first related commits appearing in 2005, six years in advance of an enhancement request for it. It became generally usable in 2013 when building with Java SE 6 or later, using the annotation processing framework Java introduced in that release. 1.5.0 is the first PL/Java numbered release to feature it.</p>
<div class="section">
<h5><a name="Annotation_keyword_changes"></a>Annotation keyword changes</h5>
<p>If you have been using the SQL generation feature in prerelease <tt>git</tt> builds of 2013 or later, be aware that some annotation keywords have changed in finalizing the 1.5.0 release. Java code that was compiled using the earlier keywords will continue to work, but will have to be updated before it can be recompiled.</p>

<ul>
  
<li>For functions: <tt>effects=(VOLATILE,STABLE,IMMUTABLE)</tt> was formerly <tt>type=</tt></li>
  
<li>For functions: <tt>type=</tt> (<i>an explicit SQL return type for the function</i>) was formerly <tt>complexType=</tt></li>
  
<li>For functions: <tt>trust=(SANDBOXED,UNSANDBOXED)</tt> was formerly <tt>(RESTRICTED,UNRESTRICTED)</tt></li>
  
<li>For triggers: <tt>called=(BEFORE,AFTER,INSTEAD_OF)</tt> was formerly <tt>when=</tt> and conflicted with the <tt>WHEN</tt> clause introduced for triggers in PostgreSQL 9.0.</li>
</ul></div></div>
<div class="section">
<h4><a name="A_jar_may_have_more_than_one_deployment_descriptor"></a>A jar may have more than one deployment descriptor</h4>
<p>PL/Java formerly allowed only one entry in a jar to be a deployment descriptor (that is, a file of SQL commands to be executed upon loading or unloading the jar). The SQL/JRT standard allows multiple entries to be deployment descriptors, executed in the order they are mentioned <i>in the jar manifest</i>, or the reverse of that order when the jar is being unloaded. PL/Java now conforms to the standard.</p>
<p>The behavior is useful during transition to annotation-driven deployment descriptor generation for a project that already has a manually-maintained deployment descriptor. PL/Java&#x2019;s own <tt>pljava-examples</tt> project is an illustration, in the midst of such a transition itself.</p>
<p>Note the significance placed by SQL/JRT on the order of entries in a jar manifest, whose order is normally <i>not</i> significant according to the Jar File Specification. Care can be needed when manipulating manifests with automated tools that may not preserve order.</p></div>
<div class="section">
<h4><a name="Conditional_execution_within_deployment_descriptors"></a>Conditional execution within deployment descriptors</h4>
<p>Deployment descriptors have a primitive conditional-execution provision defined in the SQL/JRT standard: commands wrapped in a<br /><tt>BEGIN IMPLEMENTOR</tt> <i>identifier</i> construct will only be executed if the <i>identifier</i> is recognized by the SQL/JRT implementation in use. The design makes possible jars that can be installed on different database systems that provide SQL/JRT features, with database-specific commands wrapped in <tt>BEGIN IMPLEMENTOR</tt> blocks with an <i>identifier</i> specific to the system. By default, PL/Java recognizes the <i>identifier</i> <tt>postgresql</tt> (matched without regard to case).</p>
<p>PL/Java extends the standard by allowing the PostgreSQL configuration variable <tt>pljava.implementors</tt> to contain a list of identifiers that will be recognized. SQL code in a deployment descriptor can conditionally add or remove identifiers in this list to influence which subsequent implementor blocks will be executed, giving a still-primitive but more general control structure.</p>
<p>In sufficiently recent PostgreSQL versions, the same effect could be achieved using <tt>DO</tt> statements and PL/pgSQL control structures, but this facility in PL/Java does not require either to be available.</p></div>
<div class="section">
<h4><a name="Interaction_with_SET_ROLE_corrected"></a>Interaction with <tt>SET ROLE</tt> corrected</h4>
<p>PL/Java formerly was aware of the user ID associated with the running session, but not any role ID that user may have acquired with <tt>SET ROLE</tt>. The result would commonly be failed permission checks made by PL/Java when the session user did not have the needed permission, but had <tt>SET ROLE</tt> to a role that did. Likewise, within <tt>install_jar</tt>, PL/Java would execute deployment descriptor commands as the original session user rather than as the user&#x2019;s current role, with permission failures a likely result.</p>
<p>Correcting this issue has changed the PL/Java API, but without a bump of major version because the prior API, while deprecated, is still available.</p>

<ul>
  
<li><a href="pljava-api/apidocs/index.html?org/postgresql/pljava/Session.html#getOuterUserName"><tt>getOuterUserName</tt></a> and <a href="pljava-api/apidocs/index.html?org/postgresql/pljava/Session.html#executeAsOuterUserjava.sql.Connectionjava.lang.String"><tt>executeAsOuterUser</tt></a> are new, and correctly refer to the session user or current role, when active.</li>
  
<li><a href="pljava-api/apidocs/index.html?org/postgresql/pljava/Session.html#getSessionUserName"><tt>getSessionUserName</tt></a> and <a href="pljava-api/apidocs/index.html?org/postgresql/pljava/Session.html#executeAsSessionUserjava.sql.Connectionjava.lang.String"><tt>executeAsSessionUser</tt></a> are still present but deprecated, and <i>their semantics are changed</i>. They are now deprecated aliases for the corresponding new methods, which honor the set role. Use cases that genuinely need to refer only to the <i>session</i> user and ignore the role should be rare, and should be discussed on the mailing list or opened as issues.</li>
</ul></div>
<div class="section">
<h4><a name="Unicode_transparency"></a>Unicode transparency</h4>
<p>Since the resolution of <a class="externalLink" href="https://github.com/tada/pljava/issues/21">bug 21</a>, PL/Java contains a regression test to ensure that character strings passed and returned between PostgreSQL and Java will round-trip without alteration for the full range of Unicode characters, <i>when the database encoding is set to <tt>UTF8</tt></i>.</p>
<p>More considerations apply when the database encoding is anything other than <tt>UTF8</tt>, and especially when it is <tt>SQL_ASCII</tt>. Please see <a href="use/charsets.html">character encoding support</a> for more.</p></div></div>
<div class="section">
<h3><a name="Enhancement_requests_addressed"></a>Enhancement requests addressed</h3>

<ul>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=337&amp;group_id=1000038&amp;aid=1011112">Use Annotations instead of DDL Manifest</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/9">Installation of pljava on postgresql servers</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/6">Find an alternative way to install the pljava.so in <tt>/usr/lib</tt></a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/12">Provide database migration</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=337&amp;group_id=1000038&amp;aid=1011140">Support types with type modifiers</a> (partial: see <a class="externalLink" href="https://github.com/tada/pljava/tree/master//pljava-examples/src/main/java/org/postgresql/pljava/example/annotation/IntWithMod.java">example</a>)</li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/102">Build process: accommodate Solaris 10</a></li>
</ul></div>
<div class="section">
<h3><a name="Bugs_fixed"></a>Bugs fixed</h3>
<div class="section">
<h4><a name="Since_1.5.0-BETA3"></a>Since 1.5.0-BETA3</h4>

<ul>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/101">Build process: accept variation in PostgreSQL version string</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/103">Build process: accommodate PostgreSQL built with private libraries</a></li>
  
<li>Clarified message when <tt>CREATE EXTENSION</tt> fails because new session needed</li>
  
<li>Reduced stack usage in SQL generator (small-memory build no longer needs <tt>-Xss</tt>)</li>
</ul></div>
<div class="section">
<h4><a name="In_1.5.0-BETA3"></a>In 1.5.0-BETA3</h4>

<ul>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/98">Bogus mirror-UDT values on little-endian hardware</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/99">Base UDT not registered if first access isn&#x2019;t in/out/send/recv</a></li>
  
<li><tt>TupleDesc</tt> leak warnings with composite UDTs</li>
  
<li>also added regression test from <a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010962">1010962</a> report</li>
</ul></div>
<div class="section">
<h4><a name="In_1.5.0-BETA2"></a>In 1.5.0-BETA2</h4>

<ul>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/92">Generate SQL for trigger function with no parameters</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/94">openssl/ssl.h needed on osx el-capitan (latest 10.11.3)/postgres 9.5</a> (documented)</li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/95">Source location missing for some annotation errors</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/96">OS X El Capitan &#x201c;Java 6&#x201d; dialog when loading &#x2026; Java 8</a></li>
  
<li>pljava-api jar missing from installation jar</li>
</ul></div>
<div class="section">
<h4><a name="In_1.5.0-BETA1"></a>In 1.5.0-BETA1</h4>

<ul>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1011119">SPIPreparedStatement.setObject() fails with Types.BIT</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1011095">SSLSocketFactory throws IOException on Linux</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1011181">PL/Java fails to compile with -Werror=format-security</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1011197">PL/Java does not build on POWER 7</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1011206">The built in functions do not use the correct error codes</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010962">TupleDesc reference leak</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/4">String conversion to enum fails</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/7">segfault if SETOF RECORD-returning function used without AS at callsite</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/17">pl/java PG9.3 Issue</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/8">No-arg functions unusable: &#x201c;To many parameters - expected 0&#x201d;</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/54">Exceptions in static initializers are masked</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/52">UDT in varlena form breaks if length &gt; 32767</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/21">PL/Java kills unicode?</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/65">Type.c expects pre-8.3 find_coercion_pathway behavior</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/48">Support PostgreSQL 9.5</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/22">pl/java getting a build on MacOSX - PostgreSQL 9.3.2</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/23">build pljava on windows for PostgreSQL 9.2</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/28">Error while installing PL/Java with Postgresql 9.3.4 64 bit on Windows 7 64 bit System</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/63">pljava does not compile on mac osx ver 10.11.1 and postgres 9.4</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/64">pljava does not compile on centos 6.5 and postgres 9.4</a></li>
  
<li><a class="externalLink" href="https://github.com/tada/pljava/issues/71">Error installing pljava with Windows 7 64 Bit and Postgres 9.4</a></li>
</ul></div></div>
<div class="section">
<h3><a name="Updated_PostgreSQL_APIs_tracked"></a>Updated PostgreSQL APIs tracked</h3>
<p>Several APIs within PostgreSQL itself have been added or changed; PL/Java now uses the current versions of these where appropriate:</p>

<ul>
  
<li><tt>find_coercion_pathway</tt></li>
  
<li><tt>set_stack_base</tt></li>
  
<li><tt>GetOuterUserId</tt></li>
  
<li><tt>GetUserNameFromId</tt></li>
  
<li><tt>GetUserIdAndSecContext</tt></li>
  
<li><tt>pg_attribute_*</tt></li>
  
<li>Large objects: truncate, and 64-bit offsets</li>
</ul></div>
<div class="section">
<h3><a name="Known_issues_and_areas_for_future_work"></a>Known issues and areas for future work</h3>
<div class="section">
<h4><a name="Developments_in_PostgreSQL_not_yet_covered"></a>Developments in PostgreSQL not yet covered</h4>

<dl>
<dt>Large objects, access control</dt>
<dd>PL/Java does not yet expose PostgreSQL large objects with a documented, stable API, and the support it does contain was developed against pre-9.0 PostgreSQL versions, where no access control applied to large objects and any object could be accessed by any database user. PL/Java&#x2019;s behavior is proper for PostgreSQL before 9.0, but improper on 9.0+ where it would be expected to honor access controls on large objects (<a class="externalLink" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-0768">CVE-2016-0768</a>). This will be corrected in a future release. For this and earlier releases, the recommendation is to selectively grant <tt>USAGE</tt> on the <tt>java</tt> language to specific users or roles responsible for creating Java functions; see &#x201c;default <tt>USAGE</tt> permssion&#x201d; under Changes.</dd>
<dt><tt>INSTEAD OF</tt> triggers, triggers on <tt>TRUNCATE</tt></dt>
<dd>
<p>These are supported by annotations and the SQL generator, and the runtime will deliver them to the specified method, but the <tt>TriggerData</tt> interface has no new methods to recognize these cases (that is, no added methods analogous to <tt>isFiredAfter</tt>, <tt>isFiredByDelete</tt>). For a method expressly coded to be a <tt>TRUNCATE</tt> trigger or an <tt>INSTEAD OF</tt> trigger, that is not a problem, but care should be taken when coding a trigger method to handle more than one type of trigger, or creating triggers of these new types that call a method developed pre-PL/Java-1.5.0. Such a method could be called with a <tt>TriggerData</tt> argument whose existing <tt>isFired...</tt> methods all return <tt>false</tt>, likely to put the method on an unexpected code path.</p>
<p>A later PL/Java version should introduce trigger interfaces that better support such evolution of PostgreSQL in a type-safe way.</p></dd>
<dt>Constraint triggers</dt>
<dd>Constraint trigger syntax is not supported by annotations and the SQL generator. If declared (using hand-written SQL), they will be delivered by the runtime, but without any constraint-trigger-specific information available to the called method.</dd>
<dt>Event triggers</dt>
<dd>Event triggers are not yet supported by annotations or the SQL generator, and will not be delivered by the PL/Java runtime.</dd>
<dt>Range types</dt>
<dd>No predefined mappings for range types are provided.</dd>
<dt><tt>PRE_PREPARE</tt>, <tt>PRE_COMMIT</tt>, <tt>PARALLEL_ABORT</tt>, <tt>PARALLEL_PRE_COMMIT</tt>, and <tt>PARALLEL_COMMIT</tt> transaction callbacks, <tt>PRE_COMMIT</tt> subtransaction callbacks</dt>
<dd>Listeners for these events cannot be registered and the events will not be delivered.</dd>
</dl></div>
<div class="section">
<h4><a name="Imperfect_integration_with_PostgreSQL_dependency_tracking"></a>Imperfect integration with PostgreSQL dependency tracking</h4>
<p>In a dump/restore, manual intervention can be needed if the users/roles recorded as owners of jars are missing or have been renamed. A current <a class="externalLink" href="http://www.postgresql.org/message-id/56783412.6090005@anastigmatix.net">thread on <tt>pgsql-hackers</tt></a> should yield a better solution for a future release.</p></div>
<div class="section">
<h4><a name="Quirk_if_deployment_descriptor_loads_classes_from_same_jar"></a>Quirk if deployment descriptor loads classes from same jar</h4>
<p>The <tt>install_jar</tt> function installs a jar, optionally reading deployment descriptors from the jar and executing the install actions they contain. It is possible for those actions to load classes from the jar just installed. (This would be unlikely if the install actions are limited to typical setup, function/operator/datatype creation, but likely, if the install actions also include basic function tests, or if the setup requirements are more interesting.)</p>
<p>If, for any class in the jar, the first attempt to load that class is made while resolving a function declared <tt>STABLE</tt> or <tt>IMMUTABLE</tt>, a <tt>ClassNotFoundException</tt> results. The cause is PostgreSQL&#x2019;s normal treatment of a <tt>STABLE</tt> or <tt>IMMUTABLE</tt> function, which relies on a snapshot from the start of the <tt>install_jar</tt> query, when the jar was not yet installed. A workaround is to ensure that the install actions cause each needed class to be loaded, such as by calling a <tt>VOLATILE</tt> function it supplies, before calling one that is <tt>STABLE</tt> or <tt>IMMUTABLE</tt>. (One could even write install actions to declare a needed function <tt>VOLATILE</tt> before the first call and then redeclare it.)</p>
<p>This issue should be resolved as part of a broader rework of class loading in a future PL/Java release.</p></div>
<div class="section">
<h4><a name="Partial_implementation_of_JDBC_4_and_later"></a>Partial implementation of JDBC 4 and later</h4>
<p>The changes to make PL/Java build under Java SE 6 and later, with version 4.0 and later of JDBC, involved providing the specified methods so compilation would succeed, with real implementations for some, but for others only stub versions that throw <tt>SQLFeatureNotSupportedException</tt> if used. Regrettably, there is nothing in the documentation indicating which methods have real implementations and which do not; to create such a list would require an audit of that code. If a method throws the exception when you call it, it&#x2019;s one of the unimplemented ones.</p>
<p>Individual methods may be fleshed out with implementations as use cases arise that demand them, but for a long-term roadmap, it seems more promising to reduce the overhead of maintaining another JDBC implementation by sharing code with <tt>pgjdbc</tt>, as has been <a class="externalLink" href="http://lists.pgfoundry.org/pipermail/pljava-dev/2015/002370.html">discussed on pljava-dev</a>.</p></div>
<div class="section">
<h4><a name="Exception_handling_and_logging"></a>Exception handling and logging</h4>
<p>PL/Java does interconvert between PostgreSQL and Java exceptions, but with some loss of fidelity in the two directions. PL/Java code has some access to most fields of a PostgreSQL error data structure, but only through internal PL/Java API that is not expected to remain usable, and code written for PL/Java has never quite had first-class standing in its ability to <i>generate</i> exceptions as information-rich as those from PostgreSQL itself.</p>
<p>PL/Java in some cases generates the <i>categorized <tt>SQLException</tt>s</i> introduced with JDBC 4.0, and in other cases does not.</p>
<p>This area may see considerable change in a future release. <a class="externalLink" href="https://github.com/tada/pljava/wiki/Thoughts-on-logging">Thoughts on logging</a> is a preview of some of the considerations.</p></div>
<div class="section">
<h4><a name="Types_with_type_modifiers_and_COPY"></a>Types with type modifiers and <tt>COPY</tt></h4>
<p>Although it is possible to create a PL/Java user-defined type that accepts a type modifier (see the <a class="externalLink" href="https://github.com/tada/pljava/tree/master//pljava-examples/src/main/java/org/postgresql/pljava/example/annotation/IntWithMod.java">example</a>), such a type will not yet be handled by SQL <tt>COPY</tt> or any other operation that requires the <tt>input</tt> or <tt>receive</tt> function to handle the modifier. This is left for a future release.</p></div></div>
<div class="section">
<h3><a name="Credits"></a>Credits</h3>
<p>PL/Java 1.5.0 owes its being to original creator Thomas Hallgren and many contributors:</p>
<p>Daniel Blanch Bataller, Peter Brewer, Frank Broda, Chapman Flack, Marty Frasier, Bear Giles, Christian Hammers, Hal Hildebrand, Robert M. Lefkowitz, Eugenie V. Lyzenko, Dos Moonen, Asif Naeem, Kenneth Olson, Johann Oskarsson, Thomas G. Peters, Srivatsan Ramanujam, Igal Sapir, Jeff Shaw, Rakesh Vidyadharan, <tt>grunjol</tt>, <tt>mc-soi</tt>.</p>
<p>Periods in PL/Java&#x2019;s development have been sponsored by EnterpriseDB.</p>
<p>In the 1.5.0 release cycle, multiple iterations of testing effort have been generously contributed by Kilobe Systems and by Pegasystems, Inc.</p></div></div>
<div class="section">
<h2><a name="Earlier_releases"></a>Earlier releases</h2>
<div class="section">
<h3><a name="PLJava_1.4.3_15_September_2011"></a>PL/Java 1.4.3 (15 September 2011)</h3>
<p>Notable changes in this release:</p>

<ul>
  
<li>Works with PostgreSQL 9.1</li>
  
<li>Correctly links against IBM Java.</li>
  
<li>Reads microseconds correctly in timestamps.</li>
</ul>
<p>Bugs fixed:</p>

<ul>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010660">Be clear about not building with JDK 1.6</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010970">Does not link with IBM VM</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010971">SPIConnection.getMetaData() is incorrectly documented</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1011025">PL/Java 1.4.2 Does not build with x86_64-w64-mingw32</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1011091">PL/Java does not build with PostgreSQL 9.1</a></li>
</ul>
<p>Feature Requests:</p>

<ul>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=337&amp;group_id=1000038&amp;aid=1011092">Allow pg_config to be set externally to the Makefile</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=337&amp;group_id=1000038&amp;aid=1010955">Add option to have pljava.so built with the runtime path of libjvm.so</a></li>
</ul></div>
<div class="section">
<h3><a name="PLJava_1.4.2_11_December_2010"></a>PL/Java 1.4.2 (11 December 2010)</h3>
<p>Bugfixes:</p>

<ul>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010956">Function returning complex objects with POD arrays cause a segfault</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010953">Segfault when assigning an array to ResultSet column</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010482">Embedded array support in returned complex objects</a></li>
</ul></div>
<div class="section">
<h3><a name="PLJava_1.4.1_9_December_2010"></a>PL/Java 1.4.1 (9 December 2010)</h3>
<p>Note: Does not compile with Java 6. Use JDK 1.5 or 1.4.</p>
<p>Compiles with PostgreSQL 8.4 and 9.0.</p>
<p>Connection.getCatalog() has been implemented.</p>
<p>Bugfixes:</p>

<ul>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010759">Compiling error with postgresql 8.4.1</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010712">org.postgresql.pljava.internal.Portal leak</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010189">build java code with debugging if server has debugging enabled</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010653">Connection.getCatalog() returns null</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010462">VM crash in TransactionListener</a></li>
  
<li><a class="externalLink" href="http://pgfoundry.org/tracker/?func=detail&amp;atid=334&amp;group_id=1000038&amp;aid=1010954">Link against wrong library when compiling amd64 code on Solaris</a></li>
</ul>
<p>Other commits:</p>
<p>For a multi-threaded pljava function we need to adjust stack_base_ptr before calling into the backend to avoid stack depth limit exceeded errors. Previously this was done only on query execution, but we need to do it on iteration of the ResultSet as well.</p>
<p>When creating a variable length data type, the code was directly assigning the varlena header length rather than going through an access macro. The header format changed for the 8.3 release and this manual coding was not noticed and changed accordingly. Use SET_VARSIZE to do this correctly.</p>
<p>Handle passed by value data types by reading and writing directly to the Datum rather than dereferencing it.</p>
<p>If the call to a type output function is the first pljava call in a session, we get a crash. The first pljava call results in a SPI connection being established and torn down. The type output function was allocating the result in the SPI memory context which gets destroyed prior to returning the data to the caller. Allocate the result in the correct context to survive function exit.</p>
<p>Clean up a warning about byteasend and bytearecv not having a prototype when building against 9.0 as those declarations are now in a new header file.</p></div>
<div class="section">
<h3><a name="PLJava_1.4.0_1_February_2008"></a>PL/Java 1.4.0 (1 February 2008)</h3>
<p>Warning! The recent postgresql security releases changed the API of a function that PL/Java uses. The source can be built against either version, but the binaries will only run against the version they were built against. The PL/Java binaries for 1.4.0 have all been built against the latest server releases (which you should be using anyway). If you are using an older you will have to build from source. The binary releases support: 8.3 - All versions. 8.2 - 8.2.6 and up. 8.1 - 8.1.11 and up. 8.0 - 8.0.15 and up.</p></div>
<div class="section">
<h3><a name="PLJava_1.3.0_18_June_2006"></a>PL/Java 1.3.0 (18 June 2006)</h3>
<p>This release is about type mapping and the creation of new types in PL/Java. An extensive effort has gone into making the PL/Java type system extremely flexible. Not only can you map arbitrary SQL data types to java classes. You can also create new scalar types completely in Java. Read about the Changes in version 1.3.</p>
<div class="section">
<h4><a name="Changes"></a>Changes</h4>

<ul>
  
<li>
<p>A much improved type mapping system that will allow you to:</p>
  
<ul>
    
<li><a class="externalLink" href="https://github.com/tada/pljava/wiki/Mapping-an-sql-type-to-a-java-class">Map any SQL type to a Java class</a></li>
    
<li><a class="externalLink" href="https://github.com/tada/pljava/wiki/Creating-a-scalar-udt-in-java">Create a Scalar UDT in Java</a></li>
    
<li><a class="externalLink" href="https://github.com/tada/pljava/wiki/Default-type-mapping">Map array and pseudo types</a></li>
  </ul></li>
</ul>

<ul>
  
<li>Get the OID for a given relation (<a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1319">feature request 1319</a>)</li>
  
<li>Jar manifest included in the SQLJ Jar repository (<a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1525">feature request 1525</a>)</li>
</ul></div>
<div class="section">
<h4><a name="Fixed_bugs"></a>Fixed bugs</h4>

<ul>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1531">Reconnect needed for jar manipulation to take effect</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1504">Backends hang with test suite</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1560">Keeps crashing while making a call to a function</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1556">Memory Leak in Statement.executeUpdate</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1506">jarowner incorrect after dump and reload</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1525">Missing JAR manifest</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1547">TZ adjustments for Date are incorrect</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1542">Functions returning sets leaks memory</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1423">drop lib prefix</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1317">&#x201c;oid&#x201d; column is not available in trigger&#x2019;s NEW/OLD ResultSet</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1480">fails to run with GCJ, too</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1558">Compile failure with 8.1.4</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1479">fails to build with GCJ</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1440">Record returning function cannot be called with different structures within one session</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1551">Cannot map function with complex return type to method that uses non primitive arguments</a></li>
  
<li><a class="externalLink" href="http://web.archive.org/web/20061208113236/http://gborg.postgresql.org/project/pljava/bugs/bugupdate.php?1319">Get OID for given relation</a></li>
</ul></div></div>
<div class="section">
<h3><a name="PLJava_1.2.0_20_Nov_2005"></a>PL/Java 1.2.0 (20 Nov 2005)</h3>
<p>The PL/Java 1.2.0 release is primarily targeted at the new PostgreSQL 8.1 but full support for 8.0.x is maintained. New features include support IN/OUT parameters, improved meta-data handling, and better memory management.</p></div>
<div class="section">
<h3><a name="PLJava_1.1.0_14_Apr_2005"></a>PL/Java 1.1.0 (14 Apr 2005)</h3>
<p>PL/Java 1.1.0 includes a lot of new features such as <tt>DatabaseMetaData</tt>, <tt>ResultSetMetaData</tt>, language handlers for both trusted and untrusted language, additional semantics for functions returning <tt>SETOF</tt>, and simple ObjectPooling.</p></div>
<div class="section">
<h3><a name="PLJava_1.0.1_07_Feb_2005"></a>PL/Java 1.0.1 (07 Feb 2005)</h3>
<p>This release resolves a couple of important security issues. The most important one is perhaps that PL/Java now is a trusted language. See <a class="externalLink" href="https://github.com/tada/pljava/wiki/Security">Security</a> for more info. Filip Hrbek, now member of the PL/Java project, contributed what was needed to make this happen.</p></div>
<div class="section">
<h3><a name="PLJava_1.0.0_23_Jan_2005"></a>PL/Java 1.0.0 (23 Jan 2005)</h3>
<p>Today, after a long period of fine tuning, PL/Java 1.0.0 was finally released.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2003&#x2013;2016
                        <a href="http://tada.se/eng/">Tada AB</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
